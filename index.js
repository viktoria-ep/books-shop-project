import{a as H,S as I,N as x,P as W,K as q,A as ce,i as p,b as de}from"./assets/vendor-BeNWam2W.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const Y="https://books-backend.p.goit.global/books",N=document.getElementById("booksList"),l=document.getElementById("showMoreBtn"),le=document.getElementById("booksCount"),K=document.getElementById("categoriesList"),h=document.getElementById("customSelect"),ue=document.getElementById("customSelectBtn"),me=document.querySelector(".custom-select-text"),R=document.getElementById("customSelectOptions");let m=[],d=[],a=0;const pe=document.querySelector(".books-section"),g=document.createElement("div");g.classList.add("books-loader-overlay");g.innerHTML='<div class="books-loader"></div>';pe.appendChild(g);function b(){g.classList.add("active")}function v(){g.classList.remove("active")}function G(e){const t=new Set;return e.filter(o=>{const s=o.title.trim().toLowerCase();return t.has(s)?!1:(t.add(s),!0)})}function fe(){return window.innerWidth>=768?24:10}function ye(){return 4}async function ge(){try{b();const{data:e}=await H.get(`${Y}/top-books`);m=e.flatMap(o=>o.books.map(s=>({...s,category:o.list_name}))),m=G(m).slice(0,120),d=[...m];const t=[...new Set(e.map(o=>o.list_name))];be(t),a=0,B(!1)}catch(e){console.error("Error loading books:",e)}finally{v()}}function be(e){const t=e.map(o=>`<li data-category="${o}">${o}</li>`).join("");R.innerHTML=`<li data-category="all">All categories</li>${t}`,K.innerHTML=`<li data-category="all">All categories</li>${t}`}function B(e=!1){const t=fe(),o=ye(),s=a===0?t:a+o,r=d.slice(a,s).map(i=>`
      <li class="book-card" data-id="${i._id}">
        <img class="book-image" src="${i.book_image}" alt="${i.title}" />
        <div class="book-info">
          <div>
            <h3 class="book-title">${i.title}</h3>
            <p class="book-author">${i.author}</p>
          </div>
          <p class="book-price">$${(Math.random()*90+10).toFixed(2)}</p>
        </div>
        <button class="learn-more-btn" data-id="${i._id}">Learn More</button>
      </li>`).join("");e||(N.innerHTML=""),N.insertAdjacentHTML("beforeend",r),a=s,le.textContent=`Showing ${Math.min(a,d.length)} of ${d.length}`,l.style.display=a<d.length?"block":"none"}async function J(e){a=0,b();try{!e||e==="all"?(await new Promise(t=>setTimeout(t,300)),d=[...m],B(!1)):await ve(e)}catch(t){console.error("Error filtering category:",t)}finally{v()}}async function ve(e){try{b();const{data:t}=await H.get(`${Y}/category`,{params:{category:e}});d=G(t),a=0,B(!1)}catch(t){console.error("Error loading category books:",t)}finally{v()}}l.addEventListener("click",async()=>{b(),l.disabled=!0,l.style.opacity="0.6";try{await new Promise(e=>setTimeout(e,200)),B(!0)}finally{v(),l.disabled=!1,l.style.opacity="1"}});ue.addEventListener("click",e=>{e.stopPropagation(),h.classList.toggle("open")});R.addEventListener("click",e=>{if(e.target.tagName==="LI"){const t=e.target.dataset.category;me.textContent=e.target.textContent,h.classList.remove("open"),J(t)}});document.addEventListener("click",e=>{h.contains(e.target)||h.classList.remove("open")});K.addEventListener("click",e=>{if(e.target.tagName==="LI"){const t=e.target.dataset.category;J(t),e.target.classList.add("pressed"),setTimeout(()=>e.target.classList.remove("pressed"),150)}});ge();document.addEventListener("click",async e=>{const t=e.target.closest(".learn-more-btn");if(!t)return;const o=t.dataset.id;b();try{typeof openBookModal=="function"?await openBookModal(o):console.warn("openBookModal() не знайдено — перевір підключення modal.js")}catch(s){console.error("Помилка при відкритті модалки:",s)}finally{v()}});let u;function Q(){window.innerWidth<1440&&!u?u=new I(".events-swiper",{modules:[x,W,q],pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},breakpoints:{375:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:24}}}):window.innerWidth>=1440&&u&&(u.destroy(!0,!0),u=null)}Q();window.addEventListener("resize",Q);const ke=document.querySelectorAll(".btn-arrow");ke.forEach(e=>{e.addEventListener("mouseup",()=>e.blur()),e.addEventListener("touchend",()=>e.blur())});new I(".feedback-swiper",{modules:[x,W,q],pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-nex",prevEl:".swiper-button-pre"},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,breakpoints:{375:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});const he=document.querySelectorAll(".btn-arrow");he.forEach(e=>{e.addEventListener("mouseup",()=>e.blur()),e.addEventListener("touchend",()=>e.blur())});const we=document.querySelector(".burger-js"),$=document.querySelector(".header-menu"),M=document.body,Ee=document.querySelector(".close-js"),Le=document.querySelectorAll(".header-nav-link");we.addEventListener("click",Be);function Be(){$.classList.add("active"),M.classList.add("menu-open"),window.addEventListener("keydown",Z)}Ee.addEventListener("click",X);function X(){$.classList.remove("active"),M.classList.remove("menu-open"),window.removeEventListener("keydown",Z)}Le.forEach(e=>{e.addEventListener("click",()=>{$.classList.remove("active"),M.classList.remove("menu-open")})});function Z(e){(e.key==="Escape"||e.code==="Escape")&&X()}let C;function ee(){C&&C.destroy(!0,!0),C=new I(".hero-slider",{modules:[x,q,ce],slidesPerView:1,allowTouchMove:!0,loop:!1,autoplay:{delay:5e3,disableOnInteraction:!0},keyboard:{enabled:!0,onlyInViewport:!1},navigation:{nextEl:".slider-button.next",prevEl:".slider-button.prev",disabledClass:"slider-button--disabled"},on:{init(){V(this)},slideChange(){V(this)}}})}function V(e){const t=document.querySelector(".slider-button.prev"),o=document.querySelector(".slider-button.next");t.disabled=e.isBeginning,o.disabled=e.isEnd}window.addEventListener("load",ee);let D;window.addEventListener("resize",()=>{clearTimeout(D),D=setTimeout(()=>{ee()},300)});const Se=document.querySelectorAll(".btn-arrow");Se.forEach(e=>{e.addEventListener("mouseup",()=>e.blur()),e.addEventListener("touchend",()=>e.blur())});p.settings({position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"});document.addEventListener("DOMContentLoaded",()=>{window.accordionInstance=new de(".js-accordion",{duration:380,showMultiple:!0,collapse:!0}),document.querySelectorAll(".js-accordion .ac-panel").forEach(e=>{e.style.overflow="hidden",e.style.boxSizing="border-box"})});const f=document.getElementById("modal-backdrop"),Ce=document.getElementById("close-modal"),U=document.getElementById("add-to-cart"),_=document.getElementById("buy-now"),c=document.getElementById("quantity"),z=document.getElementById("increase"),F=document.getElementById("decrease");document.addEventListener("click",async e=>{var t,o,s,n;if(e.target.classList.contains("learn-more-btn")){const r=e.target.closest(".book-card");if(!r)return;const i=((t=r.querySelector(".book-image"))==null?void 0:t.src)||"",re=((o=r.querySelector(".book-title"))==null?void 0:o.textContent)||"Untitled",ie=((s=r.querySelector(".book-author"))==null?void 0:s.textContent)||"Unknown",ae=((n=r.querySelector(".book-price"))==null?void 0:n.textContent)||"$0.00",O=r.dataset.id;let j="Description not found";if(O)try{const k=await fetch(`https://books-backend.p.goit.global/books/${O}`);if(k.ok){const S=await k.json();S.description&&S.description.trim()!==""&&(j=S.description)}}catch(k){console.error("Помилка при отриманні опису книги:",k)}document.getElementById("book-image").src=i,document.getElementById("book-title").textContent=re,document.getElementById("book-author").textContent=ie,document.getElementById("book-price").textContent=ae,document.getElementById("details").textContent=j,document.getElementById("shipping").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.getElementById("returns").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",f.classList.remove("is-hidden"),document.body.style.overflowY="hidden"}});function T(){f.classList.add("is-hidden"),document.body.style.overflow="",c.value=1}Ce.addEventListener("click",T);f.addEventListener("click",e=>{e.target===f&&T()});document.addEventListener("keydown",e=>{e.key==="Escape"&&T()});z&&F&&c&&(z.addEventListener("click",()=>{c.value=parseInt(c.value)+1}),F.addEventListener("click",()=>{parseInt(c.value)>1&&(c.value=parseInt(c.value)-1)}));function Ie(e,t,o){return e===1?t:o}U.addEventListener("click",()=>{const e=Number(c.value),t=Ie(e,"book","books"),o=`✔ ${e} ${t} added to cart`;p.show({message:o,backgroundColor:"#f9decd",messageColor:"#0b0500",progressBar:!1}),U.blur()});_.addEventListener("click",e=>{e.preventDefault(),p.show({message:"❤︎ Thank you for your purchase!",backgroundColor:"#f9decd",messageColor:"#0b0500",progressBar:!1}),_.blur()});window.openBookModal=async function(e){try{const t=await fetch(`https://books-backend.p.goit.global/books/${e}`);if(!t.ok)throw new Error("Book not found");const o=await t.json();document.getElementById("book-image").src=o.book_image||"",document.getElementById("book-title").textContent=o.title||"Untitled",document.getElementById("book-author").textContent=o.author||"Unknown",document.getElementById("book-price").textContent=`$${(Math.random()*90+10).toFixed(2)}`,document.getElementById("details").textContent=o.description||"No description available",document.getElementById("shipping").textContent="We ship within 2–5 business days across the U.S. Free standard shipping on orders over $50.",document.getElementById("returns").textContent="You can return an item within 14 days if unused and in its original packaging.",f.classList.remove("is-hidden"),document.body.style.overflowY="hidden"}catch(t){console.error("Помилка при відкритті модалки:",t)}};const P=document.querySelector(".contact-form"),xe=document.querySelector(".events-list"),y=document.querySelector(".contact-modal-overlay"),te=document.body,w=P.querySelectorAll("input"),oe=P.querySelectorAll(".error-message"),qe=document.querySelector(".close-btn"),$e=document.querySelector(".modal-paragraph");function ne(e){e.target===y&&A()}xe.addEventListener("click",Me);function Me(e){const t=e.target.closest(".events-btn");if(!t)return;w.forEach(n=>n.classList.remove("error")),oe.forEach(n=>{n.textContent="",n.classList.remove("show")});const s=t.closest(".events-list-item").querySelector(".events-subtitle").textContent;$e.textContent=s,y.classList.add("is-open"),te.classList.add("menu-open"),window.addEventListener("keydown",se),y.addEventListener("click",ne)}function se(e){(e.key==="Escape"||e.code==="Escape")&&A()}qe.addEventListener("click",A);function A(){w.forEach(e=>{e.value=""}),y.classList.remove("is-open"),te.classList.remove("menu-open"),window.removeEventListener("keydown",se),y.removeEventListener("click",ne)}P.addEventListener("submit",Te);function Te(e){e.preventDefault();const t=e.target;t.elements.name.value.trim(),t.elements.email.value.trim();let o=!1;w.forEach(s=>s.classList.remove("error")),oe.forEach(s=>{s.textContent="",s.classList.remove("show")}),w.forEach(s=>{if(s.value.trim()===""){s.classList.add("error");const n=s.nextElementSibling;n&&(n.textContent="Error text",n.classList.add("show")),o=!0}}),!o&&t.reset()}const E=document.querySelector(".send-btn");E.addEventListener("mouseup",()=>E.blur());E.addEventListener("touchend",()=>E.blur());document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".footer-form");e&&e.addEventListener("submit",t=>{t.preventDefault();const o=e.querySelector(".footer-form-input");if(o.value.trim(),!o.checkValidity()){p.show({message:"✘ Please enter a valid email address!",backgroundColor:"#f9decd",messageColor:"#0b0500",progressBar:!1});return}p.show({message:"❤︎ Thank you for subscribing!",backgroundColor:"#f9decd",messageColor:"#0b0500",progressBar:!1}),e.reset()})});const L=document.querySelector(".footer-form-button");L.addEventListener("mouseup",()=>L.blur());L.addEventListener("touchend",()=>L.blur());
//# sourceMappingURL=index.js.map
